<!DOCTYPE html>
<html>
<head>
    <title>Todo List</title>

    <!-- Jquery -->
    <script src="/js/util/jquery-1.12.4.min.js"></script>

    <!-- Vue.js -->
    <script src="/js/util/vue.js"></script>

    <!-- Moment.js -->
    <script type="text/javascript" src="/js/util/moment.js"></script>

    <!-- 합쳐지고 최소화된 최신 CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

    <!-- 부가적인 테마 -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">

    <!-- 합쳐지고 최소화된 최신 자바스크립트 -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

    <!-- fontawesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">

</head>
<body>
    <div class="container">
        <div id="work_app">
            <!-- 만료된 todo list -->
            <div class="alert alert-warning alert-dismissible" role="alert" v-if="expiredWorks.length > 0">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <strong>알림!</strong> 오늘까지 \{{expiredWorks.length}} 개의 Work가 만료되었습니다!
            </div>

            <!-- work 입력 -->
            <div class="well well-lg newwork_box">

                <select class="form-control" id="insert select" v-model="newWork.priority">
                    <option value="">우선순위 설정</option>
                    <option value="FIRST">매우 중요</option>
                    <option value="SECOND">중요</option>
                    <option value="THIRD">보통</option>
                    <option value="FOURTH">중요하지 않음</option>
                </select>

                <div class="input-group" id="insert title">
                    <span class="input-group-addon" id="sizing-addon2">제목</span>
                    <input type="text" class="form-control" v-model="newWork.workTitle" placeholder="SummerCoding 개별과제" aria-describedby="sizing-addon2">
                </div>

                <textarea class="form-control" id="insert contents" v-model="newWork.contents" rows="3" placeholder="Todo List 만들기"></textarea>

                <div class="checkbox" id="insert checkbox">
                    <label>
                        <input type="checkbox" v-model="deadlineCheck">
                        종료날짜 설정
                    </label>
                </div>
                {{!-- 데드라인 설정하기 <input type="checkbox" v-model="deadlineCheck"> <br> --}}
                
                <div v-if="deadlineToggle" id="insert deadline">
                    <input type="date" class="form-control" v-model="newWork.deadline">
                </div>

                <button type="button" class="btn btn-primary" @click="insertWork">등록</button>
                {{!-- <a @click="insertWork">등록</a> --}}
            </div>

            <div>
                TODOS
            </div>

            <!-- todo list -->
            <div class="worklist_box" v-for="(work, index) in works">
                <div>
                    <div id="completed">
                        <span v-if="work.completed">
                            <i class="fas fa-check"></i>
                        </span>
                    </div>
                    <div>
                        <div id="worktitle">
                            \{{work.workTitle}}
                        </div>
                        <div id="priority">
                            \{{work.priority | priority}}
                        </div>
                        <div id="contents">
                            \{{work.contents}}
                        </div>
                        <div v-if="work.deadline">
                            ~ \{{work.deadline | moment}}
                        </div>
                    </div>

                    <div>
                        <a @click="modifyToggle(work, index)">수정</a>
                        <a @click="removeWork(work.id)">삭제</a>
                        <a @click="completeWork(work)">완료</a>
                    </div>
                </div>
                
                {{!-- <div class="well well-lg">
                    <li>\{{work.priority | priority}}</li>
                    <li>\{{work.workTitle}}</li>
                    <li>\{{work.contents}}</li>
                    <li v-if="work.deadline"> ~ \{{work.deadline | moment}}</li>

                    <a @click="modifyToggle(work, index)">수정</a>
                    <a @click="removeWork(work.id)">삭제</a>
                    <a @click="completeWork(work)">완료</a>
                </div> --}}

                <!-- work 수정 -->
                <div v-if="modifyIndex == index">
                    <select class="form-control" id="modify select" v-model="momdifyWork.priority">
                        <option value="">우선순위 설정</option>
                        <option value="FIRST">매우 중요</option>
                        <option value="SECOND">중요</option>
                        <option value="THIRD">보통</option>
                        <option value="FOURTH">중요하지 않음</option>
                    </select>

                    <div class="input-group" id="modify title">
                        <span class="input-group-addon" id="sizing-addon2">제목</span>
                        <input type="text" class="form-control" v-model="modifyWork.workTitle" aria-describedby="sizing-addon2">
                    </div>

                    <textarea class="form-control" id="modify contents" v-model="modifyWork.contents" rows="3"></textarea>

                    <div class="checkbox" id="modify checkbox">
                        <label>
                            <input type="checkbox" v-model="modifyDeadlineCheck">
                            종료날짜 설정
                        </label>
                    </div>
                    {{!-- 데드라인 설정하기 <input type="checkbox" v-model="deadlineCheck"> <br> --}}
                    
                    <div v-if="modifyDeadlineToggle" id="modify deadline">
                        <input type="date" class="form-control" v-model="modifyWork.deadline">
                    </div>

                    <button type="button" class="btn btn-primary" @click="updateWork">등록</button>
                    
                    {{!-- <select v-model="modifyWork.priority">
                        <option value="">우선순위 설정</option>
                        <option value="FIRST">매우 중요</option>
                        <option value="SECOND">중요</option>
                        <option value="THIRD">보통</option>
                        <option value="FOURTH">중요하지 않음</option>
                    </select>

                    <div class="input-group">
                        <input type="text" class="form-control" v-model="modifyWork.workTitle">
                    </div>

                    <div class="input-group">
                        <textarea class="form-control" v-model="modifyWork.contents"></textarea>
                    </div>

                    데드라인 설정하기 <input type="checkbox" v-model="modifyDeadlineCheck"> <br>
                    <span v-if="modifyDeadlineToggle">
                        <input type="date" class="form-control" v-model="modifyWork.deadline">
                    </span>


                    <a @click="updateWork">수정완료</a> --}}
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="/js/api/work.js"></script>
    <script type="text/javascript" src="/js/controller/layout.js"></script>
    <script type="text/javascript" src="/js/controller/workController.js"></script>
</body>
</html>